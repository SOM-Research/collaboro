<div class="container-fluid" ng-controller="ProjectController">
    <div class="row-fluid">
      <!--The vertical menu-->    
      <div class="col-sm-2 col-md-1 sidebar">
        <p class="text-center"><strong>Current Version</strong></p>
        <div class="alert alert-info text-center"><strong>{{dslVersion}}</strong></div>  
        <div class="btn-group-vertical">
        <button ng-click="previousVersion()" class="btn btn-default btn-sm">Previous Version</button>
        <!--<button ng-click="createVersion()" class="btn btn-default btn-sm">Create Version</button>-->
        <button ng-click="nextVersion()" class="btn btn-default btn-sm">Next Version</button>
        </div>
        <p></p>
        <!--<button ng-click="launchDecision()" class="btn btn-default btn-sm">Run Decisions</button>-->
        <p></p>
        <hr>
        <p class="text-center"><strong>Recommender report</strong></p>
        <div ng-class="recommenderMessage.type">{{recommenderMessage.text}}</div>
        <button ng-click="launchRecommender()" class="btn btn-default btn-sm btn-block">Recommend!</button>
        <button ng-click="configRecommender()" class="btn btn-default btn-sm btn-block">Configuration</button>
      </div>
      <!--The four panels.--> 
      <div class="col-sm-9 col-sm-offset-1 col-md-10 col-md-offset-1 main">
         <div class="row-fluid">
          <!--The panel of the metamodel-->
          <div class="col-md-6">
            <div class="panel panel-primary"> 
              <div class="panel-heading">
                <h3 class="panel-title">Abstract Syntax</h3>
              </div>
              <div class="panel-body" ng-controller="AbstractSyntaxController">
                <div class="row">
                  <p class="text-center">
                    <a ng-href="{{abstractSyntaxImage}}" target="_blank"><img style="max-width: 100%; height: 300px;" ng-src="{{abstractSyntaxImage}}"></a>
                  </p>
                </div>
                <div class="row">
                  <p class="text-center">
                    <button ng-click="previousAbstractSyntaxImage()" class="btn btn-default btn-sm"><<</button>
                    <button ng-click="nextAbstractSyntaxImage()" class="btn btn-default btn-sm">>></button>
                  </p>
                </div>
              </div>
            </div>
          </div>
          <!--The panel of the models--> 
          <div class="col-md-6">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h3 class="panel-title">Concrete Syntax Examples</h3>
              </div>
              <div class="panel-body" ng-controller="ConcreteSyntaxController">
                <div class="row">  
                  <p class="text-center">
                    <a ng-href="{{concreteSyntaxImage}}" target="_blank"><img style="max-width: 100%; height: 300px;" ng-src="{{concreteSyntaxImage}}"  ></a>
                  </p>
                </div>
                <div class="row">
                  <p class="text-center">
                    <button ng-click="previousConcreteSyntaxImage()" class="btn btn-default btn-sm"><<</button>
                    <button ng-click="nextConcreteSyntaxImage()" class="btn btn-default btn-sm">>></button>
                  </p>
                </div>
              </div> 
            </div>
          </div>
         </div> 
         <div class="row-fluid" ng-controller="collaborationController">
           <!--The panel of the versions--> 
           <div class="col-md-6">
            <div class="panel panel-primary">
             <div class="panel-heading">
                <h3 class="panel-title">Collaborations</h3>
             </div>
             <div class="panel-body">
               <div>
                <div class="row">
                  <div class="col-md-12">
                      <div style="background:whitesmoke;border:1px solid lightgray;border-radius:5px;">
                        <abn-tree 
                          tree-data="collaborationTreeData" 
                          tree-control="collaborationTreeControl" 
                          icon-leaf="fa fa-circle" 
                          icon-expand="fa fa-plus-circle" 
                          icon-collapse= "fa fa-minus-circle"  
                          on-select="collaborationSelected(branch); $broadcast('collaborationSelectedEvent')" 
                          expand-level="10">
                        </abn-tree>
                      </div>
                      <hr>
                      <p class="text-center">
                        <button ng-click="addCollaboration('Proposal')" class="btn btn-default btn-sm">Add Proposal</button>
                        <button ng-disabled="collaborationTreeControl.get_selected_branch() == undefined" ng-click="addCollaboration('Comment')" class="btn btn-default btn-sm">Add Comment</button>
                        <button ng-disabled="collaborationTreeControl.get_selected_branch() == undefined || collaborationTreeControl.get_selected_branch().data.type != 'Proposal'" ng-click="addCollaboration('Solution')" class="btn btn-default btn-sm">Add Solution</button>
                      </p>
                      <p class="text-center">
                        <button ng-click="editcollaboration()" class="btn btn-default btn-sm">Edit</button>
                        <button ng-click="deletecollaboration()" class="btn btn-default btn-sm">Delete</button>
                        <button ng-click="refreshcollaborations(); collaborationTreeControl.expand_all()" class="btn btn-default btn-sm">Refresh</button>
                        <button ng-click="collaborationTreeControl.expand_all()" class="btn btn-default btn-sm">Expand All</button>
                        <button ng-click="collaborationTreeControl.collapse_all()" class="btn btn-default btn-sm">Collapse All</button>
                      </p>
                      <div class="alert bg-danger" ng-show="connError">
                          {{connError}}
                      </div>
                  </div>
                </div>
                <br>
                <!--<button ng-click="try_changing_the_tree_data()" class="btn btn-default muted">Change The Tree Definition</button>-->
               </div>
             </div>      
            </div>
  
           </div>  
           <!--The panel of the collaborations-->   
           <div class="col-md-6">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h3 class="panel-title">Collaboration data</h3>
             </div>
             <div class="panel-body">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Proposed by</h3>
                </div>
                <div class="panel-body">{{collaborationSelectedProposedBy}}</div>
              </div>
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Rationale</h3>
                </div>
                <div class="panel-body" ng-bind-html="collaborationSelectedRationale"></div>
              </div>
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Referred Elements</h3>
                </div>
                <div class="panel-body" ng-bind-html="collaborationSelectedReferredElements"></div>
              </div>
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Votes Agree</h3>
                </div>
                <div class="panel-body">{{collaborationSelectedAgreeVotes}}</div>
              </div>
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Votes Disagree</h3>
                </div>
                <div class="panel-body">{{collaborationSelectedDisagreeVotes}}</div>
              </div>

              <p class="text-center">
                <button ng-click="vote('yes')" ng-disabled="hasVoted() && hasVotedAgree()" class="btn btn-success btn-sm">Agree</button>
                <button ng-click="vote('no')" ng-disabled="hasVoted() && !hasVotedAgree()" class="btn btn-danger btn-sm">Disagree</button>
              </p>

              <div style="margin-top: 20px;" class="panel panel-default" ng-show="disagreement">
                <div class="panel-heading">
                  <h3 class="panel-title">Do you want to comment on your disagreement?</h3>
                </div>
                <div class="panel-body"><textarea rows="5" class="form-control" ng-model="disagreementRationale"></textarea></div>
                <div class="panel-footer">
                  <p style="margin-bottom: 0px;" class="text-center"><button ng-click="disagreementComment()" class="btn btn-primary btn-sm">Send</button></p>
                </div>
              </div>

             </div>
            </div>
           </div>
         </div>    
      </div>    
    </div>
  </div>